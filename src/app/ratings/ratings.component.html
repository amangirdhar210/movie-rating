<div class="ratings-container">
  <div class="header">
    <h2 class="title">{{ TEXT.MY_RATINGS }}</h2>
    @if (ratedMovies().length > 0) {
    <button
      pButton
      [label]="TEXT.CLEAR_ALL_RATINGS"
      icon="pi pi-trash"
      class="p-button-danger"
      (click)="clearAllRatings()"
    ></button>
    }
  </div>

  @if (ratedMovies().length === 0) {
  <div class="empty-state">
    <i class="pi pi-star empty-icon"></i>
    <h3 class="empty-title">{{ TEXT.NO_RATINGS_YET }}</h3>
    <p class="empty-text">
      {{ TEXT.NO_RATINGS_SUBTITLE }}
    </p>
  </div>
  } @if (ratedMovies().length > 0) {
  <div class="movies-grid">
    @for (movie of ratedMovies(); track movie.id) {
    <app-movie-card
      [movie]="movie"
      [isFavourite]="isFavourite(movie.id)"
      [userRating]="getUserRating(movie.id)"
      (movieClick)="onMovieClick($event)"
    ></app-movie-card>
    }
  </div>
  }

  <app-movie-detail-modal
    [(visible)]="showModal"
    [movie]="selectedMovie"
    [isFavourite]="selectedMovie ? isFavourite(selectedMovie.id) : false"
    [userRating]="selectedMovie ? getUserRating(selectedMovie.id) : 0"
    (toggleFavourite)="onToggleFavourite($event)"
    (rateMovie)="onRateMovie($event)"
  ></app-movie-detail-modal>
</div>
